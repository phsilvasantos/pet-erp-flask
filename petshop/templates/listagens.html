{% extends "base.html" %}
{% block content %}


<div class="jumbotron">

<h3 class="display-5">{{ heading }}</h3>

<hr>
<div 'tabela'>
{% if listagem.items %}

    <table class="table table-hover">
    <thead>
    <tr>
    <th scope="col" colspan="2" class="tg">Clique para editar</th>
    </tr>
    </thead>
    <tbody>

    {% for item in listagem.items %}
      <tr>

        <td>
        {{ item }}
        -
        {% if tipo == 'clientes' %}
            <a href="{{ url_for('views_cadastros.cadastro_clientes',
            operacao='ver_vendas', id=item.id) }}">Modificar</a>
        {% else %}
            <a href="#">Modificar - soon</a>
        {% endif %}

        {% if (tipo == 'vendas') or (tipo =='aberto') %}

            {% if item.saldo == 0 %}
                |
                <a href="{{ url_for('views_consultas.listagens',
                                    tipo='pagamentos',
                                    id=item.id)
                        }}">Ver $$$</a>

            {% else %}
                |
                <a href="{{ url_for('views_pagamentos.pagamentos',
                                    id=item.id)
                        }}">Adicionar $$$</a>
                {% if item.pagamentos %}
                    |
                    <a href="{{ url_for('views_consultas.listagens',
                                        tipo='pagamentos',
                                        id=item.id)
                                }}">Ver $$$</a>
                {% endif %}

            {% endif %}

        {% endif %}

        </td>
      </tr>

    {% endfor %}

    </tbody>
    </table>

{% endif %}
</div>
<hr>

<div class="botoes">
{% if tipo == 'vendas' %}
    <h4>Cadastrar novas vendas de:</h4>

    <a class="btn btn-primary" href="{{ url_for('views_vendas.vendas', tipo = 'bt') }}">
        Banho & Tosa</a>
    <a class="btn btn-primary" href="{{ url_for('views_vendas.vendas', tipo = 'hosp') }}">
        Hospedagem</a>
    <a class="btn btn-primary" href="{{ url_for('views_vendas.vendas', tipo = 'cursos') }}">
        Cursos</a>
    <a class="btn btn-primary" href="{{ url_for('views_vendas.vendas', tipo = 'produtos') }}">
        Produtos</a>

{% elif tipo == 'clientes' %}
    <a class="btn btn-primary" href="{{ url_for('views_cadastros.cadastro_clientes',
    operacao='cadastrar', id=0) }}">
    Cadastrar novo cliente
    </a>

{% elif tipo == 'peludos' %}
    <a class="btn btn-primary" href="{{ url_for('views_cadastros.cadastro_peludos') }}">
        Cadastrar novo peludo </a>

{% elif (tipo == 'pagamentos') and (saldo > 0 ) %}
    <a class="btn btn-primary"
    href="{{ url_for('views_pagamentos.pagamentos', id=listagem.items[0].venda_id) }}">Adicionar $$$</a>
{% endif %}

</div>

<div 'paginador'>

{% if listagem.pages > 1 %}
    <nav aria-label="Page navigation ">
        <ul class="pagination justify-content-end">
        {% for page_num in listagem.iter_pages(
                                left_edge=2,
                                right_edge=2,
                                left_current=2,
                                right_current=5)
        %}
            {% if listagem.page == page_num %}
                <li class="page-item active">
                <span class="page-link">{{ page_num }}
                    <span class="sr-only">(current)</span>
                </span>
                </li>

            {% else %}
                <li class="page-item">

                {% if tipo == 'aberto' %}
                    <a class="page-link"
                    href="{{ url_for('views_consultas.index', page=page_num) }}">
                    {{ page_num }}
                    </a>
                {% else %}
                    <a class="page-link"
                    href="{{ url_for('views_consultas.listagens', page=page_num, id=0, tipo = tipo) }}">{{ page_num }}
                    </a>
                {% endif %}
                </li>
            {% endif %}
        {% endfor %}
        </ul>
    </nav>
{% endif %}


</div>

</div>
{% endblock %}
